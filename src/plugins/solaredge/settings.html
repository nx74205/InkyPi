<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

<div class="form-group">
    <label for="language" class="form-label">Language:</label>
    <select id="language" name="language" class="form-input">
        <option value="en">English</option>
        <option value="de">German</option>
    </select>
</div>

<div class="form-group">
    <div class="form-group">
      <input type="checkbox" id="showPriceData" name="showPriceData" value="true" checked onclick="hideOrShowDapSelection(this)">
      <span>Show Price Data:</span>
    </div>

    <div class="form-group nowrap" id="dapSelection">
        <label for="dapCountry" class="form-label">Show Price Data for Country:</label>
        <select id="dapCountry" name="dapCountry" class="form-input">
            <option value="DE-LU">Germany, Luxembourg</option>
            <option value="NL">Netherlands</option>
            <option value="FR">France</option>
            <option value="IT-North">Italy (North)</option>
            <option value="PL">Poland</option>
        </select>
    </div>


</div>


<script>
    function hideOrShowDapSelection(checkbox) {
        if (checkbox.checked) {
            document.getElementById('dapSelection').style.display = 'block';
            checkbox.value = 'true';
        } else {
            document.getElementById('dapSelection').style.display = 'none';
            checkbox.value = 'false';
        }
    }

    document.addEventListener('DOMContentLoaded', () => {

        // defaults
        let language = "en";
        let showPriceData = "true";
        let dapCountry = "DE-LU";

        if (loadPluginSettings) {
            language = pluginSettings.language;
            showPriceData = pluginSettings.showPriceData;
            dapCountry = pluginSettings.dapCountry;

            document.getElementById('language').value = language;
            document.getElementById('showPriceData').value = showPriceData;
            document.getElementById('showPriceData').checked = (showPriceData === 'true');
            document.getElementById('dapCountry').value = dapCountry;
        } else {
            document.getElementById('language').value = language;
            document.getElementById('showPriceData').value = showPriceData;
            document.getElementById('showPriceData').checked = (showPriceData === 'true');
            document.getElementById('dapCountry').value = dapCountry;
        }

    });
</script>
